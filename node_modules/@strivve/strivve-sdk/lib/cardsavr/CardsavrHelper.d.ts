import { CardsavrSession } from "./CardsavrJSLibrary-2.0";
type MessageHandler = (message: jobMessage) => void;
type cardholder_data = {
    [k: string]: any;
};
type account = {
    [k: string]: any;
};
type card_data = {
    [k: string]: any;
};
interface job_data {
    account: account;
    user_is_present?: boolean;
    cardholder?: cardholder_data;
    cardholder_id?: number;
    card?: card_data;
    card_id?: number;
    status?: string;
    type?: string;
    queue_name?: string;
}
interface placeCardParams {
    username: string;
    financial_institution?: string;
    safe_key?: string;
}
interface jobMessage {
    type: string;
    job_id: number;
    message?: {
        status: string;
        percent_complete: number;
        termination_type?: string;
        status_message: string;
        job_duration: number;
    };
    error_message?: string;
    account_link?: {
        key_name: string;
        type: string;
        secret: string;
        label: string;
    }[];
}
interface placeCardOnSiteParams extends placeCardParams {
    job_data: job_data;
}
interface placeCardOnSitesParams extends placeCardParams {
    jobs_data: job_data[];
}
interface createCardParams {
    agent_username: string;
    financial_institution?: string;
    card: card_data;
    safe_key?: string;
}
interface postCredsParams {
    username: string;
    account_link: {
        [k: string]: string;
    };
    job_id: number;
    envelope_id: string;
    safe_key?: string;
}
export declare class CardsavrHelper {
    private static instance;
    private _sessions;
    private cardsavr_server;
    private app_name;
    private app_key;
    private cert?;
    private proxy?;
    private reject_unauthorized;
    private debug;
    setAppSettings(cardsavr_server: string, app_name: string, app_key: string, reject_unauthorized?: boolean, cert?: string, proxy?: string, debug?: boolean): CardsavrHelper;
    loginAndCreateSession(username: string, password: string, trace?: {
        [k: string]: unknown;
    }): Promise<CardsavrSession>;
    private saveSession;
    getSession(username: string): CardsavrSession;
    private restoreSession;
    static getInstance(): CardsavrHelper;
    createCard(create_card_config: createCardParams): Promise<unknown>;
    placeCardOnSiteSingleCall(place_card_config: placeCardOnSiteParams): Promise<unknown>;
    private crawlErrors;
    private handleError;
    private lookupMerchantSite;
    placeCardOnSites(place_card_config: placeCardOnSitesParams): Promise<any>;
    placeCardOnSite(place_card_config: placeCardOnSiteParams): Promise<any>;
    endSession(username: string): void;
    postCreds(post_creds_config: postCredsParams): Promise<void>;
    deleteAccount(agent_username: string, cardholder_id: number): Promise<void>;
    createCardholderQuery(username: string, cardholder_id: number): CardholderQuery;
}
export declare class CardholderQuery {
    cardholder_id: number;
    session: CardsavrSession;
    interval: number;
    event_emitter: EventEmitter;
    private _user_probe?;
    private creds_callbacks;
    constructor(cardholder_id: number, session: CardsavrSession, interval?: number);
    resetSession(session: CardsavrSession): void;
    private credsRequestHandler;
    addListener(job_id: number, handler: MessageHandler, type?: string): void;
    removeListeners(job_id: number): void;
    removeListener(job_id: number, handler: MessageHandler, type?: string): void;
    removeAll(): void;
    private stopProbe;
    private runProbe;
}
export declare class EventEmitter {
    callbacks: {
        [k: string]: MessageHandler[];
    };
    constructor();
    on(event: string, cb: MessageHandler): void;
    remove(event: string, cb: MessageHandler): void;
    emitAll(data: jobMessage): void;
    removeAll(): void;
    emit(event: string, data: jobMessage): void;
}
export {};
